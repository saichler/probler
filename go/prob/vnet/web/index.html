<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Network Automation - NOC Dashboard</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/tables.css">
    <link rel="stylesheet" href="css/modals.css">
    <link rel="stylesheet" href="css/utilities.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen hidden">
        <!-- Network themed decorations -->
        <div class="network-decoration">üåê</div>
        <div class="network-decoration">üîó</div>
        <div class="network-decoration">üì°</div>
        <div class="network-decoration">‚ö°</div>

        <div class="login-container">
            <div class="login-header">
                <div class="logo-login">
                    üï∏Ô∏è
                </div>
                <h1 class="app-title">Open Network Automation</h1>
                <p class="app-subtitle">Network Operations Center</p>
            </div>

            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" placeholder="Enter your username" required autocomplete="username">
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" placeholder="Enter your password" required autocomplete="current-password">
                </div>

                <div class="error-message" id="errorMessage">
                    Invalid username or password. Please try again.
                </div>

                <button type="submit" class="login-btn" id="loginBtn">
                    Login
                </button>
            </form>

            <div class="login-footer">
                <p>Default credentials: admin / admin</p>
                <p>Secure access to network management platform</p>
            </div>
        </div>

        <div class="version-info">
            v1.0.0 - Network Operations Center
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="header-logo-left">
                    <img src="logo.gif" alt="Open Network Automation Logo" class="main-logo">
                </div>
                <div class="header-center">
                    <h1 class="main-title">Open Network Automation</h1>
                    <div class="subtitle">Network Operations Center - Real-time Monitoring & Management</div>
                </div>
                <div class="header-right">
                    <div class="user-info">
                        <span class="username" id="currentUsername">admin</span>
                        <div class="logout-btn" onclick="logout()" title="Logout">
                            üö™
                        </div>
                    </div>
                    <div class="logo" onclick="toggleDashboard()" title="Toggle Dashboard">
                        üï∏Ô∏è
                    </div>
                </div>
            </div>
            <!-- App Navigation Tabs Integrated into Header -->
            <div class="header-tabs">
                <button class="app-tab-button active" onclick="switchApp('dashboard')" title="Dashboard">
                    <span class="app-tab-icon">üìä</span>
                    <span class="app-tab-text">Dashboard</span>
                </button>
                <button class="app-tab-button" onclick="switchApp('devices')" title="Network Devices">
                    <span class="app-tab-icon">üñ•Ô∏è</span>
                    <span class="app-tab-text">Devices</span>
                </button>
                <button class="app-tab-button" onclick="switchApp('topology')" title="Network Topology">
                    <span class="app-tab-icon">üó∫Ô∏è</span>
                    <span class="app-tab-text">Topology</span>
                </button>
                <button class="app-tab-button" onclick="switchApp('bandwidth')" title="Bandwidth Monitor">
                    <span class="app-tab-icon">üìà</span>
                    <span class="app-tab-text">Bandwidth</span>
                </button>
                <button class="app-tab-button" onclick="switchApp('config')" title="Config Manager">
                    <span class="app-tab-icon">‚öôÔ∏è</span>
                    <span class="app-tab-text">Config</span>
                </button>
                <button class="app-tab-button" onclick="switchApp('security')" title="Security Center">
                    <span class="app-tab-icon">üõ°Ô∏è</span>
                    <span class="app-tab-text">Security</span>
                </button>
                <button class="app-tab-button" onclick="switchApp('reports')" title="Reports">
                    <span class="app-tab-icon">üìã</span>
                    <span class="app-tab-text">Reports</span>
                </button>
                <button class="app-tab-button" onclick="switchApp('tools')" title="Network Tools">
                    <span class="app-tab-icon">üîß</span>
                    <span class="app-tab-text">Tools</span>
                </button>
                <button class="app-tab-button" onclick="switchApp('automation')" title="Automation Hub">
                    <span class="app-tab-icon">ü§ñ</span>
                    <span class="app-tab-text">Automation</span>
                </button>
                <button class="app-tab-button" onclick="switchApp('services')" title="System Services">
                    <span class="app-tab-icon">‚öôÔ∏è</span>
                    <span class="app-tab-text">Services</span>
                </button>
                <button class="app-tab-button" onclick="switchApp('kubernetes')" title="Kubernetes">
                    <span class="app-tab-icon">‚ò∏Ô∏è</span>
                    <span class="app-tab-text">Kubernetes</span>
                </button>
            </div>
        </div>

        <div class="layout-grid">
            <!-- App Content Area -->
            <div class="main-content">
                <!-- Dashboard Application Content -->
                <div class="app-content active" id="dashboard-app">
                    <div class="app-header">
                        <h1 class="app-title">üìä Dashboard</h1>
                        <p class="app-subtitle">Network Operations Center - Real-time monitoring and management</p>
                    </div>
                    
                    <!-- Dashboard Stats -->
                    <div class="dashboard visible" id="dashboardSection">
                        <div class="stat-card" onclick="filterDevices('all')">
                            <div class="stat-card-header">
                                <div class="stat-icon">üï∏Ô∏è</div>
                                <div class="stat-label">Total Devices</div>
                            </div>
                            <div class="stat-value" id="totalDevices">0</div>
                            <div class="stat-trend">‚ÜóÔ∏è +3 this week</div>
                        </div>
                        <div class="stat-card" onclick="filterDevices('online')">
                            <div class="stat-card-header">
                                <div class="stat-icon status-online">‚úÖ</div>
                                <div class="stat-label">Online Devices</div>
                            </div>
                            <div class="stat-value status-online" id="onlineDevices">0</div>
                            <div class="stat-trend">98.5% uptime</div>
                        </div>
                        <div class="stat-card" onclick="filterDevices('offline')">
                            <div class="stat-card-header">
                                <div class="stat-icon status-offline">‚ùå</div>
                                <div class="stat-label">Offline Devices</div>
                            </div>
                            <div class="stat-value status-offline" id="offlineDevices">0</div>
                            <div class="stat-trend">-2 from yesterday</div>
                        </div>
                        <div class="stat-card" onclick="showCriticalAlarms()">
                            <div class="stat-card-header">
                                <div class="stat-icon status-critical">üö®</div>
                                <div class="stat-label">Critical Alarms</div>
                            </div>
                            <div class="stat-value status-critical" id="criticalAlarms">0</div>
                            <div class="stat-trend">Immediate attention</div>
                        </div>
                        <div class="stat-card" onclick="showAllAlarms()">
                            <div class="stat-card-header">
                                <div class="stat-icon status-warning">‚ö†Ô∏è</div>
                                <div class="stat-label">Total Alarms</div>
                            </div>
                            <div class="stat-value status-warning" id="totalAlarms">0</div>
                            <div class="stat-trend">Last updated: now</div>
                        </div>
                    </div>

                    <!-- Content Grid -->
                    <div class="content-grid">

                        <!-- Alarms & Faults Table -->
                        <div class="section visible" id="alarmsSection">
                            <div class="section-header">
                                <h2 class="section-title">Alarms & Faults</h2>
                                <div class="section-header-controls">
                                    <button class="refresh-btn" onclick="refreshAlarms()">üîÑ Refresh</button>
                                    <button class="collapse-btn" onclick="toggleAlarmsSection()">
                                        <span id="alarmsToggleIcon">‚àí</span>
                                    </button>
                                </div>
                            </div>
                            <div class="section-content" id="alarmsContent">
                                <div class="loading" id="alarmsLoading">
                                    <div class="spinner"></div>
                                    <div>Loading alarms...</div>
                                </div>
                                <div class="table-container">
                                    <table id="alarmsTable">
                                        <thead>
                                            <tr>
                                                <th>Severity</th>
                                                <th>Timestamp</th>
                                                <th>Device</th>
                                                <th>Type</th>
                                                <th>Description</th>
                                                <th>Status</th>
                                                <th>Duration</th>
                                            </tr>
                                        </thead>
                                        <tbody id="alarmsTableBody">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Network Devices Application -->
                <div class="app-content" id="devices-app">
                    <div class="app-header">
                        <h1 class="app-title">üñ•Ô∏è Network Devices</h1>
                        <p class="app-subtitle">Comprehensive network device monitoring and management</p>
                    </div>
                    
                    <!-- Devices Content Grid -->
                    <div class="content-grid">
                        <!-- Network Devices Table -->
                        <div class="section visible devices-section" id="devicesSection">
                            <div class="section-header">
                                <h2 class="section-title">Network Devices</h2>
                                <div class="section-header-controls">
                                    <button class="refresh-btn" onclick="refreshDevices()">üîÑ Refresh</button>
                                    <button class="collapse-btn" onclick="toggleDevicesSection()">
                                        <span id="devicesToggleIcon">‚àí</span>
                                    </button>
                                </div>
                            </div>
                            <div class="section-content" id="devicesContent">
                                <div class="loading" id="devicesLoading">
                                    <div class="spinner"></div>
                                    <div>Loading devices...</div>
                                </div>
                                <div class="table-container">
                                    <table id="devicesTable">
                                        <thead>
                                            <tr>
                                                <th>Status</th>
                                                <th>Device Name</th>
                                                <th>IP Address</th>
                                                <th>Type</th>
                                                <th>Location</th>
                                                <th>CPU Usage</th>
                                                <th>Memory Usage</th>
                                                <th>Uptime</th>
                                                <th>Last Seen</th>
                                            </tr>
                                        </thead>
                                        <tbody id="devicesTableBody">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Network Topology Application -->
                <div class="app-content" id="topology-app">
                    <div class="app-header">
                        <h1 class="app-title">üó∫Ô∏è Network Topology</h1>
                        <p class="app-subtitle">Interactive network topology visualization and mapping</p>
                    </div>
                    
                    <div class="topology-controls">
                        <div class="control-group">
                            <button class="topology-btn" onclick="refreshTopology()">üîÑ Refresh</button>
                            <button class="topology-btn" onclick="toggleLinks()">üîó Toggle Links</button>
                            <button class="topology-btn" onclick="centerMap()">üåç Center Map</button>
                        </div>
                        <div class="zoom-controls">
                            <button class="topology-btn zoom-btn" onclick="zoomIn()" title="Zoom In">üîç+</button>
                            <span class="zoom-level" id="zoomLevel">100%</span>
                            <button class="topology-btn zoom-btn" onclick="zoomOut()" title="Zoom Out">üîç-</button>
                            <button class="topology-btn zoom-btn" onclick="resetZoom()" title="Reset Zoom">‚ö°</button>
                        </div>
                        <div class="topology-legend">
                            <div class="legend-item">
                                <div class="device-icon router"></div>
                                <span>Router</span>
                            </div>
                            <div class="legend-item">
                                <div class="device-icon switch"></div>
                                <span>Switch</span>
                            </div>
                            <div class="legend-item">
                                <div class="device-icon server"></div>
                                <span>Server</span>
                            </div>
                            <div class="legend-item">
                                <div class="device-icon firewall"></div>
                                <span>Firewall</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="topology-container">
                        <div class="topology-info">
                            <div class="info-item">
                                <span class="info-label">Total Devices:</span>
                                <span class="info-value" id="topologyTotalDevices">0</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Active Links:</span>
                                <span class="info-value" id="topologyActiveLinks">0</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Network Health:</span>
                                <span class="info-value health-good" id="topologyNetworkHealth">Optimal</span>
                            </div>
                        </div>
                        
                        <div class="world-map-container">
                            <svg id="worldMap" viewBox="0 0 1000 500" class="world-map">
                                <!-- World Map Outline -->
                                <defs>
                                    <pattern id="oceanPattern" x="0" y="0" width="4" height="4" patternUnits="userSpaceOnUse">
                                        <circle cx="2" cy="2" r="0.5" fill="rgba(0,129,194,0.1)"/>
                                    </pattern>
                                    <filter id="glow">
                                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                        <feMerge> 
                                            <feMergeNode in="coloredBlur"/>
                                            <feMergeNode in="SourceGraphic"/> 
                                        </feMerge>
                                    </filter>
                                </defs>
                                
                                <!-- World Map using your world.svg -->
                                <image x="0" y="0" width="1000" height="500" 
                                       href="world.svg"
                                       preserveAspectRatio="xMidYMid slice" 
                                       opacity="0.8"
                                       class="world-map-image"/>
                                
                                <!-- Network Links Layer -->
                                <g id="networkLinks" class="network-links"></g>
                                
                                <!-- Network Devices Layer -->
                                <g id="networkDevices" class="network-devices"></g>
                                
                                <!-- Hover Information -->
                                <g id="hoverInfo" class="hover-info" style="display:none;">
                                    <rect x="0" y="0" width="200" height="100" rx="5" fill="rgba(0,0,0,0.8)" stroke="rgba(0,129,194,0.5)"/>
                                    <text id="hoverText" x="10" y="20" fill="white" font-size="12"></text>
                                </g>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- Bandwidth Monitor Application -->
                <div class="app-content" id="bandwidth-app">
                    <div class="app-header">
                        <h1 class="app-title">üìà Bandwidth Monitor</h1>
                        <p class="app-subtitle">Real-time bandwidth monitoring and traffic analysis</p>
                    </div>
                </div>

                <!-- Config Manager Application -->
                <div class="app-content" id="config-app">
                    <div class="app-header">
                        <h1 class="app-title">‚öôÔ∏è Configuration Manager</h1>
                        <p class="app-subtitle">Device configuration management and version control</p>
                    </div>
                </div>

                <!-- Security Center Application -->
                <div class="app-content" id="security-app">
                    <div class="app-header">
                        <h1 class="app-title">üõ°Ô∏è Security Center</h1>
                        <p class="app-subtitle">Network security monitoring and threat detection</p>
                    </div>
                </div>

                <!-- Reports Application -->
                <div class="app-content" id="reports-app">
                    <div class="app-header">
                        <h1 class="app-title">üìã Reports</h1>
                        <p class="app-subtitle">Comprehensive reporting and analytics dashboard</p>
                    </div>
                </div>

                <!-- Network Tools Application -->
                <div class="app-content" id="tools-app">
                    <div class="app-header">
                        <h1 class="app-title">üîß Network Tools</h1>
                        <p class="app-subtitle">Diagnostic tools and network utilities suite</p>
                    </div>
                </div>

                <!-- Automation Hub Application -->
                <div class="app-content" id="automation-app">
                    <div class="app-header">
                        <h1 class="app-title">ü§ñ Automation Hub</h1>
                        <p class="app-subtitle">Network automation workflows and scripting platform</p>
                    </div>
                </div>

                <!-- System Services Application -->
                <div class="app-content" id="services-app">
                    <div class="app-header">
                        <h1 class="app-title">‚öôÔ∏è System Services</h1>
                        <p class="app-subtitle">Real-time system process monitoring and management</p>
                    </div>
                    
                    <div class="services-controls">
                        <div class="control-group">
                            <button class="services-btn" onclick="refreshServices()" title="Refresh Services">
                                üîÑ Refresh
                            </button>
                            <button class="services-btn" onclick="toggleAutoRefresh()" title="Start auto-refresh" id="autoRefreshBtn">
                                ‚ñ∂Ô∏è Auto-refresh (OFF)
                            </button>
                        </div>
                        <div class="services-stats">
                            <div class="stat-item">
                                <span class="stat-label">Total Services:</span>
                                <span class="stat-value" id="totalServices">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Running:</span>
                                <span class="stat-value status-online" id="runningServices">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Stopped:</span>
                                <span class="stat-value status-offline" id="stoppedServices">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Last Update:</span>
                                <span class="stat-value" id="lastUpdate">Never</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="services-container">
                        
                        <div class="error-message" id="servicesError" style="display: none;">
                            <div class="error-icon">‚ö†Ô∏è</div>
                            <div class="error-text">Failed to load services data. Please check connection.</div>
                            <button class="retry-btn" onclick="refreshServices()">Retry</button>
                        </div>
                        
                        <div class="table-container" id="servicesTableContainer">
                            <table class="services-table" id="servicesTable">
                                <thead>
                                    <tr id="servicesTableHeader">
                                        <!-- Dynamic headers will be inserted here -->
                                    </tr>
                                    <tr id="servicesTableSeparator" class="separator-row">
                                        <!-- Dynamic separators will be inserted here -->
                                    </tr>
                                </thead>
                                <tbody id="servicesTableBody">
                                    <!-- Dynamic service data will be inserted here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Kubernetes Application -->
                <div class="app-content" id="kubernetes-app">
                    <div class="app-header">
                        <h1 class="app-title">‚ò∏Ô∏è Kubernetes</h1>
                        <p class="app-subtitle">Kubernetes cluster monitoring and management</p>
                    </div>
                    
                    <div class="kubernetes-controls">
                        <div class="control-group">
                            <button class="kubernetes-btn" onclick="refreshKubernetes()" title="Refresh Kubernetes Data">
                                üîÑ Refresh
                            </button>
                            <button class="kubernetes-btn" onclick="toggleK8sAutoRefresh()" title="Toggle Auto-refresh" id="k8sAutoRefreshBtn">
                                ‚è∏Ô∏è Auto-refresh (30s)
                            </button>
                        </div>
                        <div class="kubernetes-global-stats">
                            <div class="stat-item">
                                <span class="stat-label">Last Update:</span>
                                <span class="stat-value" id="k8sLastUpdate">Never</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="kubernetes-container">
                        <!-- Cluster Tabs -->
                        <div class="cluster-tabs">
                            <div class="tab-nav" id="clusterTabNav">
                                <!-- Dynamic cluster tabs will be inserted here -->
                            </div>
                            <div class="tab-content" id="clusterTabContent">
                                <!-- Dynamic cluster content will be inserted here -->
                            </div>
                        </div>
                        
                        <!-- Loading state for initial data fetch -->
                        <div class="loading" id="k8sClustersLoading">
                            <div class="spinner"></div>
                            <div>Loading clusters...</div>
                        </div>
                        
                        <!-- Error state -->
                        <div class="error-message" id="k8sClustersError" style="display: none;">
                            <div class="error-icon">‚ö†Ô∏è</div>
                            <div class="error-text">Failed to load clusters data. Please check connection.</div>
                            <button class="retry-btn" onclick="refreshKubernetes()">Retry</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Alarm Details Modal -->
    <div id="alarmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalAlarmTitle">Alarm Details</h2>
                <span class="close" onclick="closeAlarmModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="alarm-content">
                    <div class="alarm-info-section">
                        <div class="alarm-details" id="alarmInfoContent">
                            <!-- Dynamic content will be inserted here -->
                        </div>
                    </div>
                    <div class="alarm-aggregation-section">
                        <div class="tree-view" id="alarmAggregationContent">
                            <!-- Dynamic tree content will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Link Details Modal -->
    <div id="linkModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalLinkTitle">Network Link Properties</h2>
                <span class="close" onclick="closeLinkModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="link-content">
                    <div class="link-info-section">
                        <div class="link-details" id="linkInfoContent">
                            <!-- Dynamic content will be inserted here -->
                        </div>
                    </div>
                    <div class="link-performance-section">
                        <div class="link-metrics" id="linkPerformanceContent">
                            <!-- Dynamic performance metrics will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Device Details Modal -->
    <div id="deviceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalDeviceName">Device Details</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="device-tabs">
                    <div class="tab-nav">
                        <button class="tab-button active" onclick="switchTab(event, 'basic-info')">üìã Basic Info</button>
                        <button class="tab-button" onclick="switchTab(event, 'hardware')">üîß Hardware</button>
                        <button class="tab-button" onclick="switchTab(event, 'performance')">üìä Performance</button>
                        <button class="tab-button" onclick="switchTab(event, 'inventory')">üèóÔ∏è Physical</button>
                    </div>
                    <div class="tab-content">
                        <div id="basic-info" class="tab-pane active">
                            <div class="tab-section">
                                <h3>Basic Information</h3>
                                <div class="device-details" id="basicInfoContent">
                                    <!-- Dynamic content will be inserted here -->
                                </div>
                            </div>
                        </div>
                        <div id="hardware" class="tab-pane">
                            <div class="tab-section">
                                <h3>Hardware Information</h3>
                                <div class="device-details" id="hardwareContent">
                                    <!-- Dynamic content will be inserted here -->
                                </div>
                            </div>
                        </div>
                        <div id="performance" class="tab-pane">
                            <div class="tab-section">
                                <h3>Performance Metrics</h3>
                                <div class="device-details" id="performanceContent">
                                    <!-- Dynamic content will be inserted here -->
                                </div>
                            </div>
                        </div>
                        <div id="inventory" class="tab-pane">
                            <div class="tab-section">
                                <h3>Physical Inventory</h3>
                                <div class="tree-view" id="inventoryContent">
                                    <!-- Dynamic tree content will be inserted here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Service Health Details Modal -->
    <div id="serviceHealthModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalServiceName">Service Health Details</h2>
                <span class="close" onclick="closeServiceHealthModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="service-content">
                    <div class="service-info-section">
                        <div class="service-details" id="serviceInfoContent">
                            <!-- Dynamic content will be inserted here -->
                        </div>
                    </div>
                    <div class="service-map-section">
                        <div class="service-map" id="serviceMapContent">
                            <!-- Dynamic services map will be inserted here -->
                        </div>
                    </div>
                    <div class="service-stats-section">
                        <div class="service-metrics" id="serviceStatsContent">
                            <!-- Dynamic metrics will be inserted here -->
                        </div>
                    </div>
                </div>
            </div> <!-- End main-content -->
        </div>
    </div>

    <!-- JavaScript Files -->
    <script src="js/utils.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/devices.js"></script>
    <script src="js/alarms.js"></script>
    <script src="js/topology.js"></script>
    <script src="js/services.js"></script>
    <script src="js/kubernetes.js"></script>
    <script src="js/app-management.js"></script>
    <script src="js/main.js"></script>

    <script>
        // All JavaScript has been moved to separate files

    </script>
</body>
</html>