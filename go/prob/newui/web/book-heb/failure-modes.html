<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#fdfbf7">
    <meta name="description" content="מצבי כשל של ארכיטקטורה משתמעת | פשטות רדיקלית לבני אדם מאת שרון אייכלר">
    <meta name="author" content="שרון אייכלר">
    <title>מצבי כשל של ארכיטקטורה משתמעת | פשטות רדיקלית לבני אדם</title>
    <link rel="stylesheet" href="css/book.css">
</head>
<body>
    <button class="mobile-nav-toggle" aria-label="פתח/סגור תפריט">
        <span></span>
        <span></span>
        <span></span>
    </button>
    <div class="sidebar-overlay"></div>

    <div class="site-container">
        <nav class="sidebar" role="navigation" aria-label="תוכן עניינים">
            <header class="site-header">
                <h1 class="book-title">פשטות רדיקלית<br>לבני אדם</h1>
                <p class="book-subtitle">שכבה 8</p>
                <div class="author-info">
                    <p>שרון אייכלר</p>
                    <p><a href="mailto:saichler@gmail.com">saichler@gmail.com</a></p>
                </div>
                <div class="sponsor-button">
                    <iframe src="https://github.com/sponsors/saichler/button" title="Sponsor saichler" height="32" width="114" style="border: 0; border-radius: 6px;"></iframe>
                </div>
            </header>

            <h2 class="nav-title">תוכן עניינים</h2>
            <ul class="chapter-list">
                <li><a href="book.html">בית</a></li>
                <li><a href="about.html">אודות המחבר</a></li>
                <li><a href="introduction.html">מבוא</a></li>
                <li><a href="thoughts.html">מחשבות</a></li>
                <li><a href="ground-rules.html">כללי יסוד</a></li>
                <li><a href="architecture.html">ארכיטקטורה כמנגנון יישור</a></li>
                <li><a href="failure-modes.html" class="active">מצבי כשל</a></li>
                <li><a href="economics.html">כלכלה</a></li>
                <li><a href="security.html">אבטחה</a></li>
                <li><a href="networking.html">רשתות</a></li>
                <li><a href="serialization.html">סריאליזציה</a></li>
                <li><a href="model-agnostic-runtime.html">זמן ריצה אגנוסטי למודל</a></li>
                <li><a href="service-as-contract.html">שירות כחוזה</a></li>
                <li><a href="api-query-language.html">API ושפת שאילתות</a></li>
                <li><a href="object-relation-mapping.html">מיפוי יחסי אובייקטים</a></li>
                <li><a href="web-server.html">שרת אינטרנט</a></li>
                <li><a href="quality.html">איכות</a></li>
                <li><a href="practice.html">תרגול</a></li>
                <li><span class="coming-soon">פשטות רדיקלית לבינה מלאכותית</span></li>
                <li><span class="coming-soon">מיגרציה</span></li>
            </ul>
        </nav>

        <main class="main-content">
            <div class="content-wrapper">
                <article>
                    <h1>מצבי כשל של ארכיטקטורה משתמעת</h1>

                    <h2>מפה מקדימה: מצבי כשל המכוסים בפרק זה</h2>

                    <p>פרק זה בוחן שרשרת סגורה של מצבי כשל מבניים שצומחים כאשר ארכיטקטורה נשארת משתמעת במערכות מבוזרות. כשלים אלה אינם בלתי תלויים; כל אחד מאפשר את הבא.</p>

                    <p>מצבי הכשל המכוסים הם:</p>

                    <ol>
                        <li><strong>צימוד מקרי</strong><br>
                        תלויות לא מוצהרות נוצרות דרך סכמות משותפות, מסדי נתונים ותופעות לוואי, והופכות נוחות לאילוץ ארכיטקטוני.</li>

                        <li><strong>בעלות משתמעת</strong><br>
                        מצב ואחריות קיימים ללא בעלים סמכותי יחיד, מה שהופך אחריותיות למשא ומתן חברתי.</li>

                        <li><strong>דליפת מקביליות</strong><br>
                        סדר, ניסיונות חוזרים ונכונות תחת תחרות דולפים לתוך קוד האפליקציה במקום להיאכף בגבול הפלטפורמה או השירות.</li>

                        <li><strong>שבריריות בדיקות</strong><br>
                        בדיקות תלויות בסביבה, תזמון ותיאום במקום בהבטחות ארכיטקטוניות דטרמיניסטיות.</li>

                        <li><strong>אבטחה באמצעות הערות</strong><br>
                        אמון והרשאות מוחלים רטרואקטיבית דרך קונפיגורציה ומידלוור במקום להיות בבעלות הארכיטקטורה.</li>
                    </ol>

                    <p>כשלים אלה יוצרים התקדמות. ברגע שכוונה היא משתמעת, צימוד מתפשט. ברגע שצימוד מתפשט, בעלות מטשטשת. ברגע שבעלות מטשטשת, מקביליות דולפת. ברגע שמקביליות דולפת, דטרמיניזם אבד. ברגע שדטרמיניזם אבד, אבטחה הופכת למשתמעת.</p>

                    <hr>

                    <h2>מטרת פרק זה</h2>

                    <p>פרק זה אינו טוען שארכיטקטורה משתמעת מזיקה. הוא מדגים שבקנה מידה, היא <strong>בלתי ברת קיימא מבנית</strong>.</p>

                    <p>החל בסביבות 2013, מערכות תוכנה עברו מביצוע מונוליטי לביצוע מבוזר. פריסה, סקיילביליות ותחומי כשל הפכו למוכווני שירות. מה שלא קרה הוא מעבר מקביל בחשיבה הארכיטקטונית.</p>

                    <p>מערכות מבוזרות דורשות <strong>חשיבת שירותיות</strong>: גישה שבה רכיבים פנימיים מתוכננים במפורש לשרת זה את זה דרך חוזים ברורים, בעלות, גבולות מקביליות והבטחות מחזור חיים. במקום זאת, רוב המערכות המשיכו להיות מתוכננות תוך שימוש בהנחות מונוליטיות, שבהן רכיבים פנימיים מסתמכים על מצב משותף, התנהגות משתמעת ותיאום צומח.</p>

                    <p>בסביבה מבוזרת, אי-התאמה זו היא יסודית. ברגע שרכיבים פנימיים מתחילים לשרת זה את זה מעבר לגבולות תהליכים, כל הנחה משתמעת הופכת למקור מורכבות. גבולות שירות, מקביליות ואחריות חייבים להיות מתוכננים במפורש; כאשר הם לא, הם מוסקים מהמימוש ומתגלים דרך כשל.</p>

                    <p>זו אינה בעיית כלים או מיומנות. זוהי השמטת תכנון. מערכות שנבנות ללא חשיבת שירותיות צוברות מורכבות שאינה טבועה בבעיה הנפתרת, אלא בארכיטקטורה עצמה.</p>

                    <p>יש אמונה גוברת שבינה מלאכותית תפתור מורכבות מצטברת זו. בינה מלאכותית, עם זאת, היא מכפילת כוח. כאשר מיושמת על ארכיטקטורות עם כוונה משתמעת ושירותיות לא מוגדרת, היא מאיצה מצבי כשל קיימים במקום לחסל אותם.</p>

                    <p>שכבה 8 קיימת כדי לטפל במצב זה בשורשו. מטרתה אינה לזהות או להפחית כשלים אלה באופן נוהלי, אלא להפוך אותם ל<strong>בלתי אפשריים ארכיטקטונית</strong>.</p>

                    <hr>

                    <h2>האויב המרכזי: תכנון משתמע</h2>

                    <p>תכנון משתמע מתרחש כאשר כוונה, בעלות והבטחות מעולם לא הופכו למפורשות וחייבים להיות מוסקים מהתנהגות המערכת.</p>

                    <p>במערכות מבוזרות, תכנון משתמע מופיע לרוב כהיעדר <strong>חוזה שירותיות</strong> מפורש בין שירותים פנימיים. כאשר רכיבים פנימיים מתקשרים ללא הסכם רמת שירות מוגדר, המכסה בעלות, מקביליות, מחזור חיים והבטחות &ndash; תיאום עובר מארכיטקטורה למשא ומתן.</p>

                    <p>אם צוותים חייבים שוב ושוב ליישר מודלים, פרוטוקולים או ממשקי API כדי שהמערכת תפעל, כשל אינו עוד אפשרות; <strong>הוא בלתי נמנע</strong>. הסכמים אלה הופכים לתהליכים חברתיים במקום לאילוצים ארכיטקטוניים, והתנהגות המערכת צומחת ממוסכמות במקום מתכנון.</p>

                    <p>תכנון משתמע מחליף חוזים ברי אכיפה בהנחות.</p>

                    <p>אינדיקטורים נפוצים כוללים:</p>

                    <ul>
                        <li>כוונה שאינה מתועדת או מפוזרת בקוד ובידע שבטי</li>
                        <li>חוזים שקיימים רק כהתנהגות קוד צומחת</li>
                        <li>בעלות שנוצרת ממוסכמות ולא מהצהרה</li>
                        <li>מקביליות שמתגלה בזמן ריצה במקום להיות מוגדרת בזמן תכנון</li>
                        <li>אבטחה שמשתמעת ממיקום בפריימוורק במקום להיות בבעלות מפורשת</li>
                    </ul>

                    <p>במערכת מבוזרת, כל הנחה משתמעת הופכת לנטל תיאום. ככל שהיקף גדל, נטלים אלה מצטברים למצבי כשל מבניים ולא לפגמים בודדים.</p>

                    <hr>

                    <h2>מצב כשל 1: צימוד מקרי</h2>

                    <h3>תיקון מבני (הפניה קדימה)</h3>
                    <p>כשל זה מתבטל כאשר אינטראקציה בין רכיבים נאלצת לעבור דרך חוזי שירות מפורשים במקום דרך רכיבים פנימיים משותפים. תיקון זה מוצג ונאכף בפרקים <strong>"שירות כחוזה, נאכף על ידי מקביליות"</strong> ו<strong>"סריאליזציה"</strong>, שם מצב משותף וצימוד ברמת הסכמה אסורים מבנית.</p>

                    <h3>סיבה</h3>
                    <p>ארכיטקטורה אינה מצהירה על גבולות שירות או חוזים, מה שמאפשר לנוחות מימוש (סכמות משותפות, מסדי נתונים, תופעות לוואי) להפוך למנגנוני אינטגרציה.</p>

                    <h3>השפעה</h3>
                    <p>שינוי מתפשט באופן בלתי צפוי בין שירותים. החלטות מקומיות יוצרות רדיוס פיצוץ כלל-מערכתי.</p>

                    <h3>התנהגות מצטברת</h3>
                    <p>ככל שיותר שירותים מתאחדים דרך רכיבים פנימיים משותפים, צימוד מתרבה באופן לא-לינארי והופך לבלתי אפשרי לפירוק ללא שכתובים מתואמים.</p>

                    <h3>תיאור</h3>

                    <p>צימוד מקרי מתרחש כאשר שירותים הופכים לתלויים בהנחות משותפות במקום בחוזים מפורשים וברי אכיפה.</p>

                    <p>במערכות מבוזרות, זה מופיע לרוב דרך:</p>

                    <ul>
                        <li>סכמות משותפות</li>
                        <li>מסדי נתונים משותפים</li>
                        <li>תופעות לוואי במקום ממשקי API</li>
                        <li>נעילת גרסאות בין צוותים</li>
                    </ul>

                    <p>צורות צימוד אלה אינן מוצהרות. הן צומחות באופן משתמע מבחירות מימוש ומטופלות מאוחר יותר כעובדות ארכיטקטוניות.</p>

                    <p>דוגמה נפוצה וממחישה היא הבלבול בין <strong>שירות מסד נתונים</strong> ל<strong>מסד נתונים כשירות</strong>.</p>

                    <h4>שירות מסד נתונים</h4>

                    <p>במודל שירות מסד נתונים, ה"שירות" שנחשף לצרכנים הוא חיבור.</p>

                    <p>תכנון זה:</p>

                    <ul>
                        <li>מצמד צרכנים ישירות לטכנולוגיה ומופע ספציפיים של מסד נתונים</li>
                        <li>דורש מכל צרכן לטפל בכשלי מסד נתונים, ניסיונות חוזרים ומעבר בין מופעים</li>
                        <li>מאלץ צרכנים להחזיק בבעלות ולפתח את סכמת מסד הנתונים</li>
                        <li>משכפל לוגיקת סריאליזציה ודה-סריאליזציה בין שירותים באמצעות שפת מסד הנתונים</li>
                        <li>מאפשר למספר שירותים לחלוק את אותה סכמה במקום להתקשר דרך ממשקי API</li>
                        <li>הופך את ביצועי מסד הנתונים לפונקציה של התנהגות ודפוסי שימוש של הצרכנים</li>
                    </ul>

                    <p>למרות שגישה זו מוצדקת לעתים קרובות כפשטות או יעילות, היא מטמיעה דאגות שמירה בכל צרכן ויוצרת צימוד הדוק ומשתמע בין שירותים.</p>

                    <h4>תוצאה</h4>

                    <p>שינוי קטן, בין אם בסכמה, במאפייני ביצועים או בהתנהגות תפעולית; יוצר רדיוס פיצוץ בלתי צפוי במספר שירותים.</p>

                    <p><strong>צימוד אינו עוד מקומי. הוא מתפשט.</strong></p>

                    <h4>סיבה מבנית</h4>

                    <p>תכנון הוסק מהמימוש במקום להיות מוצהר מכוונה.</p>

                    <p>מסד הנתונים הפך למשטח אינטגרציה לא כי הוא תוכנן כך, אלא כי <strong>זה היה נוח</strong>.</p>

                    <h4>מסד נתונים כשירות</h4>

                    <p>לעומת זאת, מסד נתונים כשירות חושף שמירה כחוזה שירות, לא כחיבור.</p>

                    <p>מודל זה:</p>

                    <ul>
                        <li>מנתק צרכנים לחלוטין מטכנולוגיה ומופעי מסד הנתונים</li>
                        <li>מסתיר טיפול בכשלים ואחריות זמינות גבוהה מאחורי גבול השירות</li>
                        <li>מרכז בעלות סכמה בתוך שירות השמירה</li>
                        <li>מבטל לוגיקת סריאליזציה ודה-סריאליזציה חוזרת בצרכנים</li>
                        <li>מונע שימוש משותף במסד נתונים, ומאלץ אינטראקציה דרך ממשקי API מפורשים</li>
                        <li>מבודד ביצועי מסד נתונים מהתנהגות צרכנים</li>
                        <li>מאפשר להרכיב מספר מופעי מסד נתונים מאחורי חזית שירות אחת</li>
                    </ul>

                    <p>כאן, שמירה אינה עוד תלות משתמעת. היא שירות מפורש עם אחריות והבטחות מוגדרות.</p>

                    <h4>למה זה חשוב</h4>

                    <p>ההבדל בין שתי הגישות אינו כלים או תשתית.<br>
                    <strong>זוהי שירותיות</strong>.</p>

                    <p>כאשר רכיבים פנימיים אינם מתוכננים לשרת זה את זה דרך חוזים מפורשים, אינטגרציה עוברת לרכיבים פנימיים משותפים. צימוד מקרי הופך לברירת מחדל, ומורכבות מצטברת שם שאינה שייכת.</p>

                    <h4>מעבר</h4>

                    <p>צימוד מקרי הוא מצב הכשל הראשון והנראה ביותר של תכנון משתמע. ברגע ששירותים מצומדים דרך רכיבים פנימיים משותפים, בעלות אינה יכולה עוד להיות יחידה או ברת אכיפה. אחריות מתפצלת מהכרח, לא מבחירה. בנקודה זו, <strong>בעלות משתמעת אינה עוד ניתנת להימנעות</strong>, היא נאכפת מבנית.</p>

                    <hr>

                    <h2>מצב כשל 2: בעלות משתמעת</h2>

                    <h3>תיקון מבני (הפניה קדימה)</h3>
                    <p>כשל זה מתבטל כאשר בעלות על מצב, מחזור חיים ונכונות ממודלת כסמכות ארכיטקטונית מפורשת. תיקון זה מוצג ב<strong>"שירות כחוזה, נאכף על ידי מקביליות"</strong> ומחוזק ב<strong>"אבטחה"</strong>, שם סמכות ואחריות מרוכזות וברות אכיפה.</p>

                    <h3>סיבה</h3>
                    <p>מצב קיים ללא סמכות ממודלת במפורש האחראית לנכונותו, מחזור חייו והתפתחותו.</p>

                    <h3>השפעה</h3>
                    <p>אחריותיות הופכת לדו-משמעית. כשלים מעוררים תיאום ומשא ומתן במקום פתרון דטרמיניסטי.</p>

                    <h3>התנהגות מצטברת</h3>
                    <p>ככל שמערכות גדלות, דו-משמעות בעלות מגדילה עלות תיאום, מעכבת תיקונים ושוחקת אמון בין צוותים.</p>

                    <h3>תיאור</h3>

                    <p>בעלות משתמעת מתרחשת כאשר אף שירות או סמכות יחידה אינם מחזיקים במפורש בבעלות על מצב, מחזור חיים ואחריות.</p>

                    <p>במערכות כאלה, בעלות נודדת דרך ידע שבטי, תיעוד ומוסכמות. אחריות מוסקת מהתנהגות במקום להיות מוצהרת על ידי ארכיטקטורה. כאשר מתרחשים כשלים, אחריותיות מנוהלת במשא ומתן במקום להיאכף.</p>

                    <p>מצב כשל זה צומח בדרך כלל כאשר מופעי מודל משותפים נצרכים על ידי צוותים מרובים ללא שירות מחזיק.</p>

                    <h4>מופע מודל כשירות (נעדר)</h4>

                    <p>צוות מחזיק ומפתח אוסף של מופעי מודל שנצרכים ישירות על ידי צוותים מורדים מרובים.</p>

                    <p>ללא גבול שירות:</p>

                    <ul>
                        <li>צרכנים הופכים לצמודים הדוקות לאופן שבו שינויים מיוצרים ומופצים</li>
                        <li>כל צרכן חייב לקבוע באופן עצמאי:
                            <ul>
                                <li>מה השתנה</li>
                                <li>האם השינוי רלוונטי</li>
                                <li>כיצד ליישם אותו על מצב או מטמון מקומי</li>
                            </ul>
                        </li>
                        <li>אחריות לפרשנות ותגובה לשינוי משוכפלת בין צוותים</li>
                        <li>כל שיפור או תיקון על ידי הצוות המחזיק דורש יישור לוחות זמנים ושחרורים בין צוותים</li>
                    </ul>

                    <p>כאשר מתרחשים כשלים, אחריות הופכת לדו-משמעית. תיאום מחליף בעלות, והאשמת אצבעות מחליפה פתרון.</p>

                    <h4>תוצאה</h4>

                    <p>בעיות קופצות בין צוותים. תיקונים מתעכבים. אחריותיות מתמוססת.</p>

                    <h4>סיבה מבנית</h4>

                    <p>בעלות מעולם לא הייתה ממודלת כחלק מהארכיטקטורה.</p>

                    <p>מצב קיים, אך סמכות על אותו מצב לא.</p>

                    <h4>בעלות על מקביליות (כשירות)</h4>

                    <p>בתכנון שירותי, בעלות על נכונות תחת מקביליות מרוכזת.</p>

                    <p>צוות אחד מחזיק בשירות. צרכנים מתקשרים רק דרך החוזה שלו.</p>

                    <p>במודל זה:</p>

                    <ul>
                        <li>אחריות לנכונות תחת מקביליות קיימת בדיוק במקום אחד</li>
                        <li>צרכנים מנותקים מפרטי מימוש</li>
                        <li>צרכנים אינם משכפלים לוגיקת פרשנות שינוי או התאמה</li>
                        <li>אחריות לזמינות ונכונות היא חד-משמעית</li>
                    </ul>

                    <p>תיקוני באגים ושיפורים מסופקים פעם אחת, בגבול השירות, ללא צורך בתיאום צרכנים או לוחות זמנים מסונכרנים.</p>

                    <h4>למה זה חשוב</h4>

                    <p>בעלות משתמעת הופכת אחריות ארכיטקטונית לתהליך חברתי. בעלות מפורשת הופכת אותה להבטחה טכנית.</p>

                    <p>ללא בעלות מפורשת, מערכות מבוזרות אינן נכשלות מהר. הן נכשלות בצורה דו-משמעית.</p>

                    <h4>מעבר</h4>

                    <p>ברגע שבעלות היא משתמעת, אין עוד מקום יחיד שבו נכונות תחת מקביליות יכולה לשכון. ללא בעלים סמכותי, סמנטיקת מקביליות חייבת להיות ממומשת מחדש על ידי כל משתתף. מרגע זה, <strong>דליפת מקביליות היא בלתי נמנעת</strong>, כי אין מקום אחר שאליו היא יכולה ללכת.</p>

                    <hr>

                    <h2>מצב כשל 3: דליפת מקביליות</h2>

                    <h3>תיקון מבני (הפניה קדימה)</h3>
                    <p>כשל זה מתבטל כאשר סמנטיקת מקביליות מוסרת מקוד האפליקציה ונאכפת מבנית על ידי הפלטפורמה. תיקון זה מוצג ב<strong>"שירות כחוזה, נאכף על ידי מקביליות"</strong> ומיושם דרך <strong>"זמן ריצה אגנוסטי למודל: נתונים ללא סכמות"</strong>.</p>

                    <h3>סיבה</h3>
                    <p>סמנטיקת מקביליות מטופלת כלוגיקת אפליקציה במקום כאחריות פלטפורמה או גבול שירות.</p>

                    <h3>השפעה</h3>
                    <p>נכונות תלויה בתזמון, ניסיונות חוזרים ונתיבי קוד הגנתיים. באגים עולים רק תחת עומס.</p>

                    <h3>התנהגות מצטברת</h3>
                    <p>כל פיצ'ר חדש מוסיף הנחות מקביליות חדשות, מה שמגדיל את ההסתברות לכשלים צומחים ובלתי ניתנים לשחזור.</p>

                    <h3>תיאור</h3>

                    <p>דליפת מקביליות מתרחשת כאשר בקרת מקביליות מטופלת בקוד האפליקציה במקום להיות בבעלות הפלטפורמה או להיאכף בגבול השירות.</p>

                    <p>במקום להיות מרוכזות, החלטות לגבי סדר, תזמון, ניסיונות חוזרים, פתרון קונפליקטים ועקביות מפוזרות על פני:</p>

                    <ul>
                        <li>לוגיקת אפליקציה</li>
                        <li>ממשקי API</li>
                        <li>שכבות שמירה</li>
                        <li>התנהגות צד לקוח</li>
                    </ul>

                    <p>מפתחים נאלצים לחשוב על מקביליות כחלק מפיתוח פיצ'רים רגיל.</p>

                    <h4>כיצד זה מופיע בפרקטיקה</h4>

                    <p>דליפת מקביליות מופיעה בדרך כלל כ:</p>

                    <ul>
                        <li>סקירות קוד שמתווכחות על ניסיונות חוזרים, נעילה או אידמפוטנטיות</li>
                        <li>לוגיקה מותנית שמנסה לפצות על מצבי מרוץ</li>
                        <li>פסילת מטמון שקשורה להנחות תזמון</li>
                        <li>באגים שלא ניתנים לשחזור ללא עומס פרודקשן</li>
                        <li>מערכות שמתנהגות נכון בבידוד אך נכשלות תחת תחרות</li>
                    </ul>

                    <p>אלה אינם מקרי קצה. הם אינדיקטורים ל<strong>כך שמקביליות אינה בבעלות.</strong></p>

                    <h4>תוצאה</h4>

                    <p>מערכות נראות יציבות בנפח נמוך ובזמן בדיקות, אך מתדרדרות באופן בלתי צפוי תחת עומס.</p>

                    <p>נכונות הופכת להסתברותית. ביטחון נשחק. פרודקשן הופך לסביבת הבדיקות האמינה היחידה.</p>

                    <h4>סיבה מבנית</h4>

                    <p>מקביליות טופלה כפרט מימוש ולא כאחריות פלטפורמה.</p>

                    <p>במקום להיאכף פעם אחת בגבול השירות, סמנטיקת מקביליות מומשה מחדש פעמים רבות ברחבי המערכת.</p>

                    <h4>למה זה חשוב</h4>

                    <p>מקביליות אינה פיצ'ר. היא תכונה של ביצוע.</p>

                    <p>כאשר מקביליות דולפת לתוך קוד האפליקציה, כל מפתח הופך לאחראי על חשיבה על ביצוע מבוזר. אחריות זו אינה מתרחבת עם גודל הצוות, גודל המערכת או הזמן.</p>

                    <hr>

                    <h2>מצב כשל 4: שבריריות בדיקות</h2>

                    <h3>תיקון מבני (הפניה קדימה)</h3>
                    <p>כשל זה מתבטל כאשר דטרמיניזם נאכף כתכונה ארכיטקטונית ולא כאסטרטגיית בדיקות. תיקון זה מוצג ב<strong>"איכות"</strong>, שם נכונות, חזרתיות ובידוד מובטחים מבנית במקום נוהלית.</p>

                    <h3>סיבה</h3>
                    <p>ארכיטקטורה אינה מבטיחה דטרמיניזם, מה שמאלץ בדיקות לקודד הנחות סביבה ותזמון.</p>

                    <h3>השפעה</h3>
                    <p>בדיקות הופכות לשבריריות, איטיות ובלתי אמינות. אות אבד ברעש.</p>

                    <h3>התנהגות מצטברת</h3>
                    <p>ככל שהביטחון בבדיקות יורד, צוותים מסתמכים על פרודקשן לאימות, מה שמגדיל תדירות אירועים ועלות התאוששות.</p>

                    <h3>תיאור</h3>

                    <p>שבריריות בדיקות מתרחשת כאשר בדיקות תלויות בהגדרת סביבה, סדר ביצוע והנחות נסתרות במקום בהבטחות ארכיטקטוניות מפורשות.</p>

                    <p>במערכות מבוזרות, שירותים מפותחים, נפרסים ומתוחזקים על ידי צוותים שונים. כאשר שירותים אלה מצומדים דרך טופולוגיית פריסה, מצב משותף או התנהגות משתמעת, בדיקות הופכות לתרגיל בתיאום ולא באימות.</p>

                    <p>בדיקות מתחילות לקודד הנחות לגבי:</p>

                    <ul>
                        <li>אילו שירותים רצים</li>
                        <li>באיזה סדר הם מתחילים</li>
                        <li>אילו נתונים הם מכילים</li>
                        <li>כמה מהר הם מגיבים</li>
                        <li>אילו כשלים מקובלים</li>
                    </ul>

                    <p>בתנאים אלה, בדיקות כבר אינן מאמתות כוונה. הן מאמתות צירוף מקרים.</p>

                    <h4>כיצד זה מופיע בפרקטיקה</h4>

                    <p>שבריריות בדיקות מתבטאת בדרך כלל כ:</p>

                    <ul>
                        <li>בדיקות אינטגרציה שדורשות תזמור סביבה ספציפי</li>
                        <li>חבילות בדיקה שחייבות לרוץ בסדר מסוים</li>
                        <li>שלבי הגדרה ידניים או זריעת נתונים</li>
                        <li>בדיקות שעוברות מקומית אך נכשלות ב-CI או בסביבת בימוי</li>
                        <li>כשלים שנעלמים כאשר בדיקות מורצות מחדש</li>
                    </ul>

                    <p>ככל שמערכות גדלות, זמן ביצוע בדיקות עולה בעוד שהביטחון יורד.</p>

                    <h4>תוצאה</h4>

                    <p>בדיקות הופכות לאיטיות, שבריריות או מוזנחות.</p>

                    <p>כשלים נדחים כסביבתיים. אות אבד ברעש. איכות הופכת לתקווה ולא להבטחה.</p>

                    <h4>סיבה מבנית</h4>

                    <p>הארכיטקטורה אינה דטרמיניסטית.</p>

                    <p>כאשר נכונות תלויה במצב פריסה, תזמון ותיאום בין שירותים, בדיקות אינן יכולות להיות מבודדות מהסביבה. המערכת הנבדקת אינה עוד מוגדרת היטב.</p>

                    <h4>למה זה חשוב</h4>

                    <p>בדיקות הן ביטויים הניתנים להרצה של כוונה ארכיטקטונית.</p>

                    <p>כאשר בדיקות הן שבריריות, כוונה היא משתמעת. כאשר כוונה היא משתמעת, אימות הופך לבלתי אמין.</p>

                    <p>מערכות מבוזרות ללא גבולות בדיקה דטרמיניסטיים מסתמכות בסופו של דבר על פרודקשן לאימות נכונות.</p>

                    <h4>מעבר</h4>

                    <p>ברגע שדטרמיניזם אבד, למערכת אין עוד מושג יציב של נכונות. בסביבה זו, אבטחה אינה יכולה להיאכף מבנית ומצומצמת לקונפיגורציה ומוסכמות. <strong>אבטחה באמצעות הערות אינה בחירה בשלב זה; היא האפשרות היחידה שנותרה.</strong></p>

                    <hr>

                    <h2>מצב כשל 5: אבטחה באמצעות הערות</h2>

                    <h3>תיקון מבני (הפניה קדימה)</h3>
                    <p>כשל זה מתבטל כאשר אבטחה, זהות ואמון מטופלים כסמכויות ארכיטקטוניות מהמעלה הראשונה ולא כהערות או מידלוור. תיקון זה מוצג ב<strong>"אבטחה"</strong> ונסמך עליו בכל הפרקים הבאים.</p>

                    <h3>סיבה</h3>
                    <p>אבטחה מתווספת דרך קונפיגורציה, מידלוור או הערות במקום להיות ממודלת כסמכות ארכיטקטונית מהמעלה הראשונה.</p>

                    <h3>השפעה</h3>
                    <p>גבולות אמון הם משתמעים ולא עקביים. ביקורת וחשיבה על אבטחה הופכות לקשות.</p>

                    <h3>התנהגות מצטברת</h3>
                    <p>כל שירות או אינטגרציה חדשים מכניסים הנחות אמון חדשות ובלתי נראות, מה שמרחיב את משטח ההתקפה לאורך זמן.</p>

                    <h3>תיאור</h3>

                    <p>אבטחה באמצעות הערות מתרחשת כאשר אימות, הרשאה ואמון מוחלים דרך הערות, פילטרים, מידלוור או מנגנוני פריימוורק במקום להיות בבעלות הארכיטקטורה.</p>

                    <p>במודל זה, אבטחה מטופלת כדאגה תוספתית. גבולות אמון הם משתמעים, מפוזרים ברחבי המערכת, ומוסקים מקונפיגורציה ומיקום קוד במקום להיות מוצהרים במפורש.</p>

                    <p>כאשר אבטחה ו-AAA מוצגות אחרי שהתנהגות המערכת כבר מוגדרת, הן אינן מאלצות מורכבות, <strong>הן מגבירות אותה</strong>. כל נקודת אינטגרציה הופכת לגבול אמון פוטנציאלי, וכל שירות חדש מכניס הזדמנות נוספת לחוסר עקביות.</p>

                    <h4>תוצאה</h4>

                    <p>פערי אבטחה צומחים בנקודות אינטגרציה. ביקורת הופכת לקשה. ביטחון נשחק.</p>

                    <p>כשלי אבטחה מתגלים באופן ריאקטיבי, לעתים קרובות דרך אירועים ולא דרך סקירת תכנון.</p>

                    <h4>סיבה מבנית</h4>

                    <p>אבטחה התווספה למערכת במקום להיות בבעלות הארכיטקטורה.</p>

                    <p>אימות, הרשאה, זהות ואמון מומשו כמנגנונים חוצי חתך ולא כסמכויות ארכיטקטוניות מהמעלה הראשונה.</p>

                    <h4>למה זה חשוב</h4>

                    <p>אבטחה אינה פיצ'ר. היא תכונה של גבולות מערכת.</p>

                    <p>כאשר אמון הוא משתמע, נכונות תלויה במשמעת ובקונפיגורציה. כאשר אמון הוא מפורש, נכונות נאכפת מבנית.</p>

                    <p>מערכות מבוזרות שמסתמכות על אבטחה באמצעות הערות צוברות בהכרח הנחות אמון בלתי נראות שלא ניתנות לביקורת או חשיבה אמינה.</p>

                    <h4>סגירת שרשרת הכשל</h4>

                    <p>כאשר אבטחה מטופלת כמחשבה מאוחרת, למערכת אין עוד מקור אמת יחיד לאמון, זהות או סמכות.</p>

                    <p>בנקודה זו, ארכיטקטורה ויתרה לחלוטין על שליטה לטובת מוסכמות.</p>

                    <p>הפרקים הבאים מציגים את התגובות המבניות של שכבה 8 למצבי כשל אלה, החל מאבטחה כסמכות ארכיטקטונית מרוכזת ולא כדאגת מימוש.</p>

                    <hr>

                    <h2>למה כשלים אלה חוזרים על עצמם</h2>

                    <p>כשלים אלה חוזרים על פני שפות, פריימוורקים, ספקי ענן וארגונים.</p>

                    <p>הם אינם נגרמים על ידי מהנדסים גרועים או כלים לקויים.</p>

                    <p>הם תוצאה של <strong>מעבר ארכיטקטוני שהוחמץ.</strong></p>

                    <p>כאשר מערכות תוכנה עברו מביצוע מונוליטי לביצוע מבוזר, <strong>המעבר הנדרש בחשיבה לא קרה</strong>. מערכות מבוזרות דורשות <strong>חשיבת שירותיות</strong> &ndash; כזו שבה רכיבים פנימיים מתוכננים במפורש לשרת זה את זה דרך חוזים, בעלות והבטחות. אך רוב מהנדסי ואדריכלי התוכנה הוכשרו וצברו ניסיון בתכנון מונוליטי, שבו תיאום פנימי הוא משתמע וגבולות שירות אינם קיימים.</p>

                    <p>הכלים, דפוסי התכנון והשפה הארכיטקטונית הנדרשים למעבר זה נעדרו ברובם. במקומם, התנהגות מבוזרת טופלה דרך פתרונות אד-הוק בתוך מימושים במקום דרך תכנון ארכיטקטוני מפורש.</p>

                    <p>מה שהיה צריך להיפתר מבנית נורמל נוהלית.</p>

                    <p>מקביליות, בעלות, אמינות, בדיקות ואבטחה טופלו דרך תיקונים מקומיים, מוסכמות וקוד מפצה במקום חוזים ברמת שירות. כל מעקף נראה סביר בבידוד. ביחד, הם יצרו <strong>כדור שלג של מורכבות מצטברת.</strong></p>

                    <p>זה מבני: יישום הנחות תכנון מונוליטי על מערכות מבוזרות מאלץ כל החלטה ארכיטקטונית חסרה להופיע מחדש כ<strong>מורכבות מימוש.</strong></p>

                    <p><strong>ארכיטקטורה משתמעת אינה יכולה להתרחב בצורה ברת קיימא.</strong></p>

                    <h3>עמדת שכבה 8</h3>

                    <p>שכבה 8 אינה מנסה:</p>

                    <ul>
                        <li>לזהות כשלים אלה</li>
                        <li>לעקוף אותם</li>
                        <li>להסתמך על משמעת, תהליך או גבורה כדי להימנע מהם</li>
                    </ul>

                    <p><strong>גישות אלה מטפלות בתסמינים, לא בגורמים.</strong></p>

                    <p>במקום זאת, שכבה 8 מחסלת את האפשרות של מצבי כשל אלה על ידי תכנון:</p>

                    <ul>
                        <li>כוונה הופכת למפורשת ולא מוסקת</li>
                        <li>בעלות מרוכזת וברת אכיפה</li>
                        <li>מקביליות מופלטפורמת במקום מוטמעת בקוד אפליקציה</li>
                        <li>דטרמיניזם נאכף כתכונה ארכיטקטונית</li>
                        <li>אבטחה מטופלת כסמכות ארכיטקטונית מהמעלה הראשונה</li>
                    </ul>

                    <p>שכבה 8 אינה מייעלת התנהגות.<br>
                    היא מאלצת ארכיטקטורה כך שההתנהגות הנכונה היא ברירת המחדל.</p>

                    <h3>שכבה 8 כהפניה ארכיטקטונית</h3>

                    <p>שכבה 8 אינה רק מערכת שמישה.<br>
                    היא גם <strong>ארכיטקטורת הפניה קונקרטית</strong>.</p>

                    <p>כל אילוץ שנאכף על ידי שכבה 8 הוא בכוונה נראה, ניתן לבחינה וניתן לשחזור. כתוצאה מכך, שכבה 8 יכולה לשמש כ:</p>

                    <ul>
                        <li><strong>מדריך</strong> לתכנון מערכות מבוזרות עם כוונה מפורשת</li>
                        <li><strong>מודל הפניה</strong> להערכת החלטות ארכיטקטוניות</li>
                        <li><strong>קו בסיס</strong> שלפיו ניתן למדוד ארכיטקטורות אחרות</li>
                    </ul>

                    <p>אינך צריך לאמץ את שכבה 8 במלואה כדי ליהנות ממנה.<br>
                    אתה יכול להשתמש בה כדי לענות על שאלה פשוטה יותר:</p>

                    <blockquote>
                        <p>היכן כוונה מקודדת, ומי אוכף אותה?</p>
                    </blockquote>

                    <p>אם לשאלה זו אין תשובה מבנית, הארכיטקטורה כבר נכשלת, גם אם המערכת נראית עובדת.</p>

                    <hr>

                    <h2>מעבר לפרקים הבאים</h2>

                    <p>מצבי הכשל המתוארים כאן אינם בעיות טכניות מבודדות. הם מבניים; והשפעתם אינה בעיקר טכנית.</p>

                    <p>הם מתבטאים כלכלית.</p>

                    <p>אבטחה, רשתות, סביבת ריצה, שירותים ואיכות אינם נכשלים בנפרד. כאשר ארכיטקטורה היא משתמעת, עלויותיהם מצטברות דרך תיאום, עיכוב, עבודה חוזרת וסיכון.</p>

                    <p>לפני בחינת תגובות מבניות, עלינו קודם לתת שם למה שכשלים אלה מוציאים מארגון לאורך זמן.</p>

                    <p>הפרק הבא אינו מציג מכניקות חדשות. הוא מסביר את הכלכלה של ארכיטקטורה משתמעת, למה מצבי כשל אלה מצטברים, למה הם כמעט אף פעם לא מתהפכים מעצמם, ולמה ארכיטקטורה הופכת לאילוץ כלכלי הרבה לפני שהיא הופכת לאילוץ טכני.</p>

                    <nav class="chapter-nav">
                        <a href="architecture.html" class="prev">ארכיטקטורה כמנגנון יישור</a>
                        <a href="economics.html" class="next">הכלכלה של ארכיטקטורה משתמעת</a>
                    </nav>
                </article>
            </div>
        </main>
    </div>

    <script src="js/book.js"></script>
</body>
</html>
