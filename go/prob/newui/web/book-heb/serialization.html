<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#fdfbf7">
    <meta name="description" content="סריאליזציה | פשטות רדיקלית לבני אדם מאת שרון אייכלר">
    <meta name="author" content="שרון אייכלר">
    <title>סריאליזציה | פשטות רדיקלית לבני אדם</title>
    <link rel="stylesheet" href="css/book.css">
</head>
<body>
    <button class="mobile-nav-toggle" aria-label="פתח/סגור תפריט">
        <span></span>
        <span></span>
        <span></span>
    </button>
    <div class="sidebar-overlay"></div>

    <div class="site-container">
        <nav class="sidebar" role="navigation" aria-label="תוכן עניינים">
            <header class="site-header">
                <h1 class="book-title">פשטות רדיקלית<br>לבני אדם</h1>
                <p class="book-subtitle">שכבה 8</p>
                <div class="author-info">
                    <p>שרון אייכלר</p>
                    <p><a href="mailto:saichler@gmail.com">saichler@gmail.com</a></p>
                </div>
                <div class="sponsor-button">
                    <iframe src="https://github.com/sponsors/saichler/button" title="Sponsor saichler" height="32" width="114" style="border: 0; border-radius: 6px;"></iframe>
                </div>
            </header>

            <h2 class="nav-title">תוכן עניינים</h2>
            <ul class="chapter-list">
                <li><a href="book.html">בית</a></li>
                <li><a href="about.html">אודות המחבר</a></li>
                <li><a href="introduction.html">מבוא</a></li>
                <li><a href="thoughts.html">מחשבות</a></li>
                <li><a href="ground-rules.html">כללי יסוד</a></li>
                <li><a href="architecture.html">ארכיטקטורה כמנגנון יישור</a></li>
                <li><a href="failure-modes.html">מצבי כשל</a></li>
                <li><a href="economics.html">כלכלה</a></li>
                <li><a href="security.html">אבטחה</a></li>
                <li><a href="networking.html">רשתות</a></li>
                <li><a href="serialization.html" class="active">סריאליזציה</a></li>
                <li><a href="model-agnostic-runtime.html">זמן ריצה אגנוסטי למודל</a></li>
                <li><a href="service-as-contract.html">שירות כחוזה</a></li>
                <li><a href="api-query-language.html">API ושפת שאילתות</a></li>
                <li><a href="object-relation-mapping.html">מיפוי יחסי אובייקטים</a></li>
                <li><a href="web-server.html">שרת אינטרנט</a></li>
                <li><a href="quality.html">איכות</a></li>
                <li><a href="practice.html">תרגול</a></li>
                <li><span class="coming-soon">פשטות רדיקלית לבינה מלאכותית</span></li>
                <li><span class="coming-soon">מיגרציה</span></li>
            </ul>
        </nav>

        <main class="main-content">
            <div class="content-wrapper">
                <article>
                    <h1>סריאליזציה</h1>

                    <h2>פעולת הסריאליזציה</h2>

                    <p>כאשר תהליך רוצה לשתף חלק ממצבו בזיכרון עם תהליך אחר, הוא חייב להמיר מצב זה לרצף של בתים ולשדר אותו על הקו. הצד המקבל חייב אז לשחזר ייצוג שמיש מאותם בתים.</p>

                    <p><strong>פעולה זו נקראת סריאליזציה.</strong></p>

                    <p>ברוב המערכות, סריאליזציה מיושמת ישירות בתוך קוד האפליקציה:</p>

                    <ul>
                        <li>הספק ממיר במפורש מודל לבתים,</li>
                        <li>הצרכן ממיר במפורש בתים חזרה למודל.</li>
                    </ul>

                    <p>כתוצאה מכך, לוגיקת אפליקציה, דאגות תחבורה והתפתחות מודל הופכים לצמודים הדוקות.</p>

                    <hr>

                    <h2>סריאליזציה וסימטריה</h2>

                    <p>סריאליזציה תמיד מרמזת על סימטריה. השולח והמקבל חייבים להסכים על המשמעות והמבנה של הנתונים המוחלפים. אין דבר כזה סריאליזציה ללא סימטריה.</p>

                    <p>מצב הכשל במערכות מבוזרות אינו קיום הסימטריה. הוא העובדה שסימטריה נאכפת ידנית, שוב ושוב, ובאופן לא עקבי בין אפליקציות.</p>

                    <p>כאשר כל ספק וצרכן מיישמים לוגיקת סריאליזציה ודה-סריאליזציה משלהם:</p>

                    <ul>
                        <li>התפתחות מודל חייבת להיות מתואמת בין בסיסי קוד,</li>
                        <li>אי-התאמות גרסאות עולות בזמן ריצה,</li>
                        <li>באגי סריאליזציה משוכפלים בין שירותים,</li>
                        <li>ומפתחי אפליקציות נושאים בנטל דאגות תשתית.</li>
                    </ul>

                    <p>סריאליזציה ודה-סריאליזציה צריכות להיות בבעלות התשתית, לא בבעלות האפליקציה, כי שכפול לוגיקה זו בין צוותים מכפיל מורכבות, מאלץ שינויי קוד מתואמים ולוחות זמני אספקה, והופך התפתחות מודל לצוואר בקבוק ארגוני ולא לדאגת פלטפורמה.</p>

                    <hr>

                    <h2>מה שכבה 8 משנה</h2>

                    <p>שכבה 8 אינה מנסה להחליש או להימנע מסימטריית סריאליזציה. במקום זאת, היא מסירה סריאליזציה ודה-סריאליזציה מקוד האפליקציה לחלוטין.</p>

                    <p>גם ספקים וגם צרכנים מנותקים מהמרות מודל-לבתים ובתים-למודל. אפליקציות אחראיות רק להבנה ויישום לוגיקה תחומית על מודלים.</p>

                    <p>הבנה פירושה שגם הספק וגם הצרכן מכירים את המודל ומסכימים על מה שכל תכונה מייצגת ומה הערך הלוגי שלה אומר. זה אינו כולל שום אחריות לקידוד או פענוח בתים.</p>

                    <p>סריאליזציה הופכת ליכולת פלטפורמה.</p>

                    <p>בשכבה 8:</p>

                    <ul>
                        <li>הספק מוסר מופע מודל לפלטפורמה,</li>
                        <li>הפלטפורמה מסריאלזת אותו לתחבורה,</li>
                        <li>הפלטפורמה המקבלת מדה-סריאלזת את המטען,</li>
                        <li>והצרכן מקבל ייצוג שמיש ללא ביצוע שום לוגיקת פענוח.</li>
                    </ul>

                    <p>הפרדה זו מאפשרת לסימטריה להיאכף באופן מרכזי ועקבי, במקום להיות מתוחזקת ידנית בכל שירות.</p>

                    <h3>דיאגרמת גבול אחריות</h3>

                    <figure class="diagram">
                        <img src="images/ser.png" alt="דיאגרמת גבול אחריות סריאליזציה" style="max-width: 70%;">
                    </figure>

                    <p><em>איור: תקשורת שירות-לשירות עם סריאליזציה, הודעות ודה-סריאליזציה בבעלות מלאה של שכבה 8.</em></p>

                    <p>דיאגרמה זו הופכת גבולות אחריות למפורשים. אפליקציות לעולם אינן מתקשרות עם בתים. כל המרות מודל-לבתים ובתים-למודל בבעלות שכבה 8 ומתווכות דרך הודעות Vnet.</p>

                    <hr>

                    <h2>רישום סוגים</h2>

                    <p>מכיוון שסריאליזציה אינה עוד בבעלות הספק או הצרכן, שכבה 8 דורשת מנגנון סמכותי לפתרון זהות סוג ושחזור.</p>

                    <p><strong>זהו תפקיד רישום הסוגים.</strong></p>

                    <p>רישום הסוגים הוא סמכותי על:</p>

                    <ul>
                        <li>זהות סוג שנישאת על הקו,</li>
                        <li>המיפוי בין מזהי סוג להגדרות מודל,</li>
                        <li>בחירת סריאלייזר ודה-סריאלייזר,</li>
                        <li>והכללים הנדרשים לשחזור מודלים ללא תלות בקוד אפליקציה.</li>
                    </ul>

                    <p>הרישום מאפשר לשכבה 8 לדה-סריאלז מטענים גם כאשר אפליקציית הצרכן לא קומפלה כנגד סוג המודל הקונקרטי.</p>

                    <p>דה-סריאליזציה מייצרת מופע מודל או ייצוג אגנוסטי-למודל שניתן לנתב, לבדוק, לאחסן, להעביר, או לקשור מאוחר יותר ללוגיקה תחומית.</p>

                    <p>הבנת המודל היא אופציונלית ומתרחשת רק כאשר האפליקציה צריכה ליישם התנהגות עסקית.</p>

                    <p>המכניקות שמאפשרות זאת, כולל ייצוגים אגנוסטיים-למודל, פתרון סוגים בזמן ריצה וחישוב דלתא, נחקרות לעומק בפרק <strong>זמן ריצה אגנוסטי למודל: נתונים ללא סכמות</strong>.</p>

                    <h2>JSON לעומת Protocol Buffers</h2>

                    <p>JSON הוא אחד מפורמטי הסריאליזציה הנפוצים ביותר כיום. הוא נמצא בשימוש נרחב לתקשורת עם ממשקי משתמש ומערכות חיצוניות.</p>

                    <p>שקלו את דוגמת ה-JSON הבאה:</p>

<pre><code>{
  "employees": [
    {
      "id": 101,
      "name": "Alice Johnson",
      "role": "Software Engineer",
      "department": "Platform"
    },
    {
      "id": 102,
      "name": "Bob Martinez",
      "role": "DevOps Engineer",
      "department": "Infrastructure"
    },
    {
      "id": 103,
      "name": "Carol Lee",
      "role": "Product Manager",
      "department": "Product"
    }
  ]
}</code></pre>

                    <p>מעבר לנתונים הגולמיים עצמם, JSON נושא תקורה מבנית משמעותית. שמות שדות ומפרידים חוזרים לאורך ההודעה, מה שמגדיל גודל מטען ועלות מעבד.</p>

                    <p>Protocol Buffers נוקטים גישה שונה. כאשר שני הצדדים כבר יודעים את הסדר והמשמעות של שדות, פורמט הקו אינו צריך לקודד תוויות שוב ושוב.</p>

                    <p>באופן המחשתי (זה אינו פורמט הקו המדויק), אותם נתונים יכולים להיראות כך:</p>

<pre><code>101Alice JohnsonSoftware EngineerPlatform102Bob MartinezDevOps EngineerInfrastructure103Carol LeeProduct ManagerProduct</code></pre>

                    <h2>אובייקט Protobuf &mdash; עדכוני דלתא</h2>

                    <p>במערכות אמיתיות, מודלים הם מורכבים ומקוננים עמוקות. הם משתנים לעתים קרובות, אך כמעט אף פעם לא בשלמותם.</p>

                    <p>סריאלייזרים מסורתיים משדרים מחדש אובייקטים מלאים גם כאשר רק תת-קבוצה קטנה של שדות השתנתה.</p>

                    <p>זה אינו רק חוסר יעילות. יש לו השלכות כלכליות ישירות.</p>

                    <h3>השפעה כלכלית של עדכוני אובייקט מלא</h3>

                    <p>שידור חוזר של אובייקט מלא מגדיל עלות לאורך שלושה ממדים:</p>

                    <ul>
                        <li><strong>רוחב פס</strong>: בתים מיותרים צורכים קיבולת רשת ומגדילים עלויות יציאה.</li>
                        <li><strong>מעבד</strong>: סריאליזציה ודה-סריאליזציה חוזרות של נתונים שלא השתנו מבזבזות מחזורי חישוב.</li>
                        <li><strong>תיאום</strong>: מטענים גדולים מגבירים את ההשפעה של שינויי סכמה, מה שמגדיל סיכון ועלות התפתחות.</li>
                    </ul>

                    <p>מכיוון שסריאליזציה ודה-סריאליזציה בבעלות הפלטפורמה ולא אפליקציות בודדות, שכבה 8 יכולה לטפל בעלויות אלה מבנית, במקום לאלץ כל צוות לממש מחדש לוגיקת אופטימיזציה או לתאם שינויי סכמה בין שירותים.</p>

                    <p>שכבה 8 מציגה את המושג <strong>אובייקט Protobuf</strong> כדי לטפל בכך מבנית.</p>

                    <p>אובייקט Protobuf הוא סריאלייזר שמבין כיצד:</p>

                    <ul>
                        <li>לסריאלז כל מופע מודל או תכונה,</li>
                        <li>לחשב שינויים בין גרסאות,</li>
                        <li>ולשדר רק את הדלתא.</li>
                    </ul>

                    <h3>למה דלתאות חשובות</h3>

                    <p>עדכונים מבוססי דלתא מפחיתים רוחב פס על ידי שידור רק מה שהשתנה. הם מפחיתים שימוש במעבד על ידי הימנעות מעיבוד חוזר של שדות שלא השתנו.</p>

                    <p>חשוב יותר, הם מפחיתים עלות תיאום. כאשר רק שינויים חוצים גבולות שירות, התפתחות מודל הופכת למקומית. שינויים קטנים נשארים קטנים.</p>

                    <p>זה משנה את הכלכלה של מערכות מבוזרות:</p>

                    <ul>
                        <li>רוחב פס מתרחב עם שינוי, לא עם גודל מודל,</li>
                        <li>עלות מעבד מתרחבת עם מוטציה, לא עם מצב,</li>
                        <li>והתפתחות סכמה אינה עוד דורשת הסכמה מסונכרנת כלל-מערכתית.</li>
                    </ul>

                    <p>על ידי הימנעות משידור חוזר של אובייקט מלא, שכבה 8 מגבילה את רדיוס הפיצוץ של שינוי ומשפרת גם סקיילביליות טכנית וגם מהירות ארגונית.</p>

                    <p>המכניקות של חישוב דלתא-מודל נדונות בפרק <strong>זמן ריצה אגנוסטי למודל: נתונים ללא סכמות</strong>.</p>

                    <hr>

                    <h2>אלמנטים</h2>

                    <p>אינטראקציות שירות משתנות מאוד. חלק מהפעולות מחזירות תוצאה בודדת. אחרות מחזירות אוספים, זרמים או שגיאות.</p>

                    <p>טיפול בווריאציות אלה מוביל בדרך כלל לממשקי API מפוצלים ולוגיקת מקרה מיוחד.</p>

                    <p>שכבה 8 מציגה את המושג <strong>אלמנטים</strong> כדי לנרמל אינטראקציות אלה.</p>

                    <p>אלמנטים מספקים מעטפת עקבית לבקשות ותגובות, ללא תלות בעוצמה או סוג פעולה. הם מאפשרים לצרכנים לחשוב על אינטראקציות באופן אחיד, בעוד ששכבה 8 מטפלת בסריאליזציה, תחבורה ושחזור.</p>

                    <p>ריכוז סריאליזציה ודה-סריאליזציה בשכבה 8 מקים בסיס להתפתחות ריצה מבוקרת, עדכוני דלתא יעילים ואינטראקציות שירות אחידות. על ידי הסרת מכניקות סריאליזציה מקוד אפליקציה, שכבה 8 מאפשרת למודלים להתפתח ללא פריסות מחדש מתואמות, מגבילה את עלות ורדיוס הפיצוץ של שינוי דרך דלתאות, ומספקת מעטפת עקבית לממשקי API דרך אלמנטים. יחד, תכונות אלה מעבירות מערכות מבוזרות מתכנונים שבריריים ומכבידי תיאום לארכיטקטורות שבהן שינוי צפוי, מוגבל וברר קיימא כלכלית.</p>

                    <p>אלמנטים ממלאים תפקיד מרכזי בממשקי API של שכבה 8 ונחקרים לעומק בפרק <strong>API ושפת שאילתות</strong>.</p>

                    <nav class="chapter-nav">
                        <a href="networking.html" class="prev">רשתות</a>
                        <a href="model-agnostic-runtime.html" class="next">זמן ריצה אגנוסטי למודל</a>
                    </nav>
                </article>
            </div>
        </main>
    </div>

    <script src="js/book.js"></script>
</body>
</html>
